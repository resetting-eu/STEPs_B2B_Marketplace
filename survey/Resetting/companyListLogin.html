<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Resetting RDL</title>
</head>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Selection</title>
</head>
<body>
    <div class="container">
        <h2>Please choose the company that you want to work with!</h2>
        <label for="company_select">Select a company:</label><br>
        <select id="company_select" name="company_select"></select>
        <br>
        <button onclick="editCompany()">Edit</button>
        <br>
        <a href="company.html"><button>Create a New Company</button></a>
    </div>

    

    <script>
        // Função para carregar as companhias no select usando AJAX
        function loadCompanies() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'get_companies.php', true);

            xhr.onload = function () {
                if (xhr.status == 200) {
                    var companies = JSON.parse(xhr.responseText);
                    var select = document.getElementById('company_select');

                    // Adicionar as opções do select com base nos dados retornados
                    companies.forEach(function (company) {
                        var option = document.createElement('option');
                        option.value = company.id;
                        option.textContent = company.name;
                        select.appendChild(option);
                    });
                } else {
                    console.error('Failed to load companies.');
                }
            };

            xhr.send();
        }
        
        // Chamada para carregar as companhias ao carregar a página
        loadCompanies();

        // Função para lidar com o botão "Edit"
      
        function editCompany() {
            var companyId = document.getElementById('company_select').value;
            // Redirecionar para a página de edição com o ID da companhia selecionada

            window.location.href = 'company.html?id=' + companyId;
            
        }
    </script> 
        
</body>
</html>